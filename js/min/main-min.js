var gameStarted=!1,p1Cards=0,p2Cards=0,p1Hand=[],p2Hand=[],p1PlayedCard=null,p2PlayedCard=null,card1Value,card2Value,p1Truce=!1,p2Truce=!1,playerTurn="p1";$("#p1Score").text(p1Cards),$("#p2Score").text(p2Cards),$("#btnStop").hide();var getCardValue=function(e){"use strict";var a;return 3===e.length?a=parseInt(e.substr(1,3)):-1!==e.indexOf("J")?a=11:-1!==e.indexOf("Q")?a=12:-1!==e.indexOf("K")?a=13:-1!==e.indexOf("A")?a=14:void 0},endGame=function(){"use strict";$("#endGame").modal("show")},compareCards=function(e,a){"use strict";return card1Value=getCardValue(e),card2Value=getCardValue(a),card2Value>card1Value?($("#p1Result").removeClass().addClass("success").text("Winner"),$("#p2Result").removeClass().addClass("error").text("Loser"),"Player 1"):card1Value>card2Value?($("#p2Result").removeClass().addClass("success").text("Winner"),$("#p1Result").removeClass().addClass("error").text("Loser"),"Player 2"):"We have a tie";p1PlayedCard=null,p2PlayedCard=null},renderScore=function(e,a){"use strict";$("#p1Score").text(e),$("#p2Score").text(a)},playTieHand=function(e,a){"use strict";var t=e.splice(0,5);$(".player-one").append('<div class="peace card deck">West</div><div class="peace card deck">West</div><div class="peace card deck">West</div><div class="peace card deck '+t[4]+'">West</div>'),console.log("p2Hands has "+a.length+"before splice ");var d=a.splice(0,5);console.log("p2Hands has "+a.length+"after splice "),$(".player-two").append('<div class="peace card deck">West</div><div class="peace card deck">West</div><div class="peace card deck">West</div><div class="peace card deck '+d[4]+'">West</div>');var l=findWinner(t[4],d[4],"tie");if(console.log("winner:"+l),"Player 1"===l){var n=t.concat(d);e=e.concat(n),renderScore(e.length,a.length),$("div").remove(".peace")}else if("Player 2"===l){var r=d.concat(t);a=a.concat(r),$("div").remove(".peace"),renderScore(e.length,a.length)}else playTieHand()},playHand=function(){"use strict";if("p1Deck"===this.id&&"p1"===playerTurn)p1PlayedCard=p1Hand.shift(),console.log(p1PlayedCard),$("#p1Pile").removeClass().addClass("card west "+p1PlayedCard),playerTurn="p2";else{if("p2Deck"!==this.id||"p2"!==playerTurn)return!1;$("#p2Deck").on("click",playHand),p2PlayedCard=p2Hand.shift(),$("#p2Pile").removeClass().addClass("card west "+p2PlayedCard),playerTurn="p1",findWinner(p1PlayedCard,p2PlayedCard)}},findWinner=function(e,a,t){"use strict";if(console.log("p1Hand"+p1Hand.length),(p1Hand.length<24||p2Hand.length<24)&&endGame(),null!==e&&null!==a){var d;if("tie"===t)return d=compareCards(e,a),$(".status").text(d),d;d=compareCards(e,a),$(".status").text(d),"Player 1"===d?(console.log("p1 wins p2Hand:"+p2Hand.length+" p1Hand:"+p1Hand.length),p1Hand.push(e,a),e=null,a=null):"Player 2"===d?(p2Hand.push(e,a),console.log("p2 wins p2Hand:"+p2Hand.length+" p1Hand:"+p1Hand.length),e=null,a=null):(console.log("tie"),playTieHand("tie")),renderScore(p1Hand.length,p2Hand.length)}},stopGame=function(){"use strict";gameStarted=!1,p1Cards=0,p2Cards=0,p1Hand=[],p2Hand=[],p1PlayedCard=null,p2PlayedCard=null,card1Value=void 0,card2Value=void 0,p1Truce=!1,p2Truce=!1,playerTurn="p1",$("#p1Score").text(p1Hand.length),$("#p2Score").text(p2Hand.length),$(".status").text("Game Over"),$("#btnStop").hide(),$("#btnStart").show(),$("#btnStop").off("click",stopGame),$("#p1Deck").off("click",playHand),$("#p2Deck").off("click",playHand),$("#p1Result").text(""),$("#p2Result").text(""),$("#p1Pile").removeClass().addClass("card west outline"),$("#p2Pile").removeClass().addClass("card west outline")},dealOutHand=function(){"use strict";console.log("gets here deal out"),$(".status").fadeIn("slow",function(){$(this).text("Shuffling cards...")});var e=dealDeck();console.log(e);for(var a=0;26>a;a++)p1Hand.push(e.pop()),p2Hand.push(e.pop());$("#p1Score").text(p1Hand.length),$("#p2Score").text(p2Hand.length),$(".status").fadeIn("slow",function(){$(this).text("Cards Dealt")})},startGame=function(e){"use strict";gameStarted=!0,$("#p1Deck").on("click",playHand),$("#p2Deck").on("click",playHand),$(".status").text("Game Started"),$("#btnStart").hide(),$("#btnStop").show(),$("#btnStop").on("click",stopGame),dealOutHand()},declareTruce=function(){"use strict";$(".status").text($(this).text())},btnStart=$("#btnStart").on("click",startGame),btnP1Truce=$(".p1-truce").on("click",declareTruce),btnP2Truce=$(".p2-truce").on("click",declareTruce);