var gameStarted=!1,p1Cards=0,p2Cards=0,p1Hand=[],p2Hand=[],p1PlayedCard=null,p2PlayedCard=null,card1Value,card2Value,p1Truce=!1,p2Truce=!1,playerTurn="p1";$("#p1Score").text(p1Cards),$("#p2Score").text(p2Cards),$("#btnStop").hide();var compareCards=function(e,a){"use strict";return 3===e.length?card1Value=parseInt(e.substr(1,3)):-1!==e.indexOf("J")?card1Value=11:-1!==e.indexOf("Q")?card1Value=12:-1!==e.indexOf("K")?card1Value=13:-1!==e.indexOf("A")&&(card1Value=14),3===a.length?card2Value=parseInt(a.substr(1,3)):-1!==a.indexOf("J")?card2Value=11:-1!==a.indexOf("Q")?card2Value=12:-1!==a.indexOf("K")?card2Value=13:-1!==a.indexOf("A")&&(card2Value=14),card2Value>card1Value?($("#p1Result").addClass("success").text("Winner"),$("#p2Result").addClass("error").text("Loser"),"Player 1"):card1Value>card2Value?($("#p2Result").addClass("success").text("Winner"),$("#p1Result").addClass("error").text("Loser"),"Player 2"):"We have a tie";p1PlayedCard=null,p2PlayedCard=null},playTieHand=function(e){"use strict";if("p1Deck"===this.id&&"p1"===playerTurn){var a=p1Hand.splice(0,5);console.log(a+" state:"+e),$("#p1Pile").removeClass().addClass("card west "+p1PlayedCard),playerTurn="p2"}else{if("p2Deck"!==this.id||"p2"!==playerTurn)return!1;p2PlayedCard=p2Hand.shift(),$("#p2Pile").removeClass().addClass("card west "+p2PlayedCard),playerTurn="p1"}},playHand=function(){"use strict";if(console.log(playerTurn),"p1Deck"===this.id&&"p1"===playerTurn)p1PlayedCard=p1Hand.shift(),$("#p1Pile").removeClass().addClass("card west "+p1PlayedCard),playerTurn="p2";else{if("p2Deck"!==this.id||"p2"!==playerTurn)return!1;p2PlayedCard=p2Hand.shift(),$("#p2Pile").removeClass().addClass("card west "+p2PlayedCard),playerTurn="p1"}findWinner(p1PlayedCard,p2PlayedCard)},findWinner=function(e,a){"use strict";if(null!==e&&null!==a){var t=compareCards(e,a);$(".status").text(t),"Player 1"===t?(console.log("p1 wins"),p1Hand.push(e,a),e=null,a=null):"Player 2"===t?(p2Hand.push(e,a),console.log("p2 wins"),e=null,a=null):(console.log("tie"),playTieHand("tie")),$("#p1Score").text(p1Hand.length),$("#p2Score").text(p2Hand.length)}},stopGame=function(){"use strict";gameStarted=!1,p1Cards=0,p2Cards=0,p1Hand=[],p2Hand=[],playerTurn="p1",$("#p1Score").text(p1Hand.length),$("#p2Score").text(p2Hand.length),$(".status").text("Game Over"),$("#btnStop").hide(),$("#btnStart").show()},dealOutHand=function(){"use strict";$(".status").text("Shuffling cards...");for(var e=shuffle(),a=0;26>a;a++)p1Hand.push(e.pop()),p2Hand.push(e.pop());$("#p1Score").text(p1Hand.length),$("#p2Score").text(p2Hand.length),$(".status").text("Cards Dealt")},startGame=function(e){"use strict";gameStarted=!0,$("#p1Deck").on("click",playHand),$("#p2Deck").on("click",playHand),$(".status").text("Game Started"),$("#btnStart").hide(),$("#btnStop").show(),$("#btnStop").on("click",stopGame),dealOutHand()},declareTruce=function(){"use strict";$(".status").text($(this).text())},btnStart=$("#btnStart").on("click",startGame),btnP1Truce=$(".p1-truce").on("click",declareTruce),btnP2Truce=$(".p2-truce").on("click",declareTruce);